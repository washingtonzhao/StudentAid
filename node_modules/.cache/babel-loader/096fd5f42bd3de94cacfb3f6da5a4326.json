{"ast":null,"code":"var _jsxFileName = \"/Users/jerry/github/StudentAid/src/hooks/useRequest.js\";\nimport React, { useEffect, useState } from \"react\";\nimport _ from \"lodash\";\nexport function useRequest(req, memo = []) {\n  const [data, setData] = useState();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [updateIndex, setUpdateIndex] = useState(0);\n\n  const forceFetch = () => setUpdateIndex(i => i + 1);\n\n  const fetchUrl = async isMounted => {\n    if (isMounted) {\n      const response = await req().catch(e => {\n        setErrorMessage(e);\n        setError(true);\n      });\n\n      if (isMounted) {\n        setData(response);\n        setLoading(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n    fetchUrl(isMounted);\n    return () => {\n      isMounted = false;\n    };\n  }, [updateIndex, ..._.flatten(memo)]);\n  return [data, loading ? () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 21\n    }\n  }) : undefined, error, forceFetch, errorMessage];\n}\nexport default useRequest;","map":{"version":3,"sources":["/Users/jerry/github/StudentAid/src/hooks/useRequest.js"],"names":["React","useEffect","useState","_","useRequest","req","memo","data","setData","loading","setLoading","error","setError","errorMessage","setErrorMessage","updateIndex","setUpdateIndex","forceFetch","i","fetchUrl","isMounted","response","catch","e","flatten","undefined"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,OAAO,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,IAAI,GAAG,EAAhC,EAAoC;AACzC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,EAAhC;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACW,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,CAAD,CAA9C;;AACA,QAAMe,UAAU,GAAG,MAAMD,cAAc,CAACE,CAAC,IAAIA,CAAC,GAAG,CAAV,CAAvC;;AAEA,QAAMC,QAAQ,GAAG,MAAMC,SAAN,IAAmB;AAClC,QAAIA,SAAJ,EAAe;AACb,YAAMC,QAAQ,GAAG,MAAMhB,GAAG,GAAGiB,KAAN,CAAYC,CAAC,IAAI;AACtCT,QAAAA,eAAe,CAACS,CAAD,CAAf;AACAX,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,OAHsB,CAAvB;;AAIA,UAAIQ,SAAJ,EAAe;AACbZ,QAAAA,OAAO,CAACa,QAAD,CAAP;AACAX,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF;AACF,GAXD;;AAaAT,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImB,SAAS,GAAG,IAAhB;AACAD,IAAAA,QAAQ,CAACC,SAAD,CAAR;AAEA,WAAO,MAAM;AACXA,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GAPQ,EAON,CAACL,WAAD,EAAc,GAAGZ,CAAC,CAACqB,OAAF,CAAUlB,IAAV,CAAjB,CAPM,CAAT;AAQA,SAAO,CACLC,IADK,EAELE,OAAO,GAAG,mBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAT,GAAmBgB,SAFrB,EAGLd,KAHK,EAILM,UAJK,EAKLJ,YALK,CAAP;AAOD;AAED,eAAeT,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport _ from \"lodash\";\n\nexport function useRequest(req, memo = []) {\n  const [data, setData] = useState();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [updateIndex, setUpdateIndex] = useState(0);\n  const forceFetch = () => setUpdateIndex(i => i + 1);\n\n  const fetchUrl = async isMounted => {\n    if (isMounted) {\n      const response = await req().catch(e => {\n        setErrorMessage(e);\n        setError(true);\n      });\n      if (isMounted) {\n        setData(response);\n        setLoading(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n    fetchUrl(isMounted);\n\n    return () => {\n      isMounted = false;\n    };\n  }, [updateIndex, ..._.flatten(memo)]);\n  return [\n    data,\n    loading ? () => <div /> : undefined,\n    error,\n    forceFetch,\n    errorMessage\n  ];\n}\n\nexport default useRequest;\n"]},"metadata":{},"sourceType":"module"}